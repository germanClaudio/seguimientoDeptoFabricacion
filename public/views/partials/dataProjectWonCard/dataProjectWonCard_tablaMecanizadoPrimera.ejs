<!-- tabla Mecanizado Primera -->
<table id="tablaOtMecanizadoPrimera<%=k%>" class="table-responsive align-middle col-5 border-end border-dark" style="font-size: 10pt; width: 100%">
    <thead class="align-middle" style="background-color: #d8d8eb">
        <tr>
            <th colspan="4" class="text-center">MECANIZADO (1Â° Parte)
                <% if (userInfo.admin || userInfo.area === 'fabricacion') { %>
                    <button id="posBtnAddDataOtMecanizadoPrimera<%=k%>" type="button" name="btnOtMecanizadoPrimera" class="btn btn-small btn-success shadow mt-1 mx-1 me-5 position-relative" style="--bs-btn-font-size: .6rem; color: var(--bs-white);" title="Agregar/Modificar Datos" value="<%=k%>">
                        <i class="fa-solid fa-pencil fa-lg" aria-hidden="true"></i>
                        <span id="spanCheckSelecMasiveMecaPrima<%=k%>" class="position-absolute top-50 start-100 translate-middle badge rounded-pill bg-danger">
                            0
                            <span class="visually-hidden">Elementos seleccionados</span>
                        </span>
                    </button>
                <% } else { %>
                    <button type="button" class="btn btn-small btn-danger shadow m-1 me-5 disabled" style="--bs-btn-font-size: .6rem; color: var(--bs-white);">
                        <i class="fa-solid fa-ban fa-lg" aria-hidden="true"></i>                                                    
                    </button>
                <% } %>
                <i class="fa-solid fa-arrows-spin fa-lg" style="color: #b09b12;"></i> En Proceso -
                <i class="fa-solid fa-circle-check fa-lg" style="color: #008f30;"></i> Terminado -
                <i class="fa-solid fa-circle-xmark fa-lg" style="color: #c40000;"></i> Suspendido -
                <i class="fa-solid fa-ban fa-lg"></i> No Aplica -
                <i class="fa-solid fa-triangle-exclamation fa-lg" style="color: #1c21ac;"></i> Sin Datos
            </th>
        </tr>
        <tr>
            <th id="colData0" style="width:33vw" scope="col-1" class="text-center">F0 | Estado | Rev</th>
            <th id="colData1" style="width:33vw" scope="col-1" class="text-center">F1 | Estado | Rev</th>
            <th id="colData2" style="width:33vw" scope="col-1" class="text-center">F2 | Estado | Rev</th>
            
        </tr>
    </thead>
    <tbody class="table-group-divider">
        
        <% const mecanizadoPrimeraConfig = {
                enProceso: { icon: "fa-arrows-spin fa-spin", iconColor: "color:#b09b12" },
                terminado: { icon: "fa-circle-check", iconColor: "color:#008f30" },
                suspendido: { icon: "fa-circle-xmark", iconColor: "color:#c40000" },
                noAplica: { icon: "fa-ban", iconColor: "color:#000000" },
                default: { icon: "fa-triangle-exclamation", iconColor: "color:#1c21ac" }
            };

        proyecto[m].project[j].oci[k].otProject.forEach((ot, n) => {
            let pathMongoOtProject = proyecto[m].project[j].oci[k].otProject,
            pathMongoOtDetalles = pathMongoOtProject[n].otDetalles,
            largoArrayOtDetalles = parseInt(pathMongoOtDetalles.length)

            let anteriorDisabled = "disabled", siguienteDisabled = "disabled",
                resDatoFCero = 'S/D', resEstadoFCero = 'S/D', resRevisionFCero = 0,
                resDatoFUno = 'S/D', resEstadoFUno = 'S/D', resRevisionFUno = 0,
                resDatoFDos = 'S/D', resEstadoFDos = 'S/D', resRevisionFDos = 0;

            for ( let o=0; largoArrayOtDetalles> o; o++) {
                let pathToMongoOtMecanizado = pathMongoOtDetalles[o].otMecanizadoPrimera || [];
                let largoArrayMecanizado = parseInt(pathToMongoOtMecanizado.length);

                let arrResDatoFCero = [], arrResEstadoFCero = [], valueArrayResFCero = 0, arrResRevisionFCero = [],
                arrResCreadorFCero = [], arrResModificadorFCero = [], arrResFechaFCero = [], arrResFechaModFCero = [];

                let arrResDatoFUno = [], arrResEstadoFUno = [], valueArrayResFUno = 0, arrResRevisionFUno = [],
                arrResCreadorFUno = [], arrResModificadorFUno = [], arrResFechaFUno = [], arrResFechaModFUno = [];

                let arrResDatoFDos = [], arrResEstadoFDos = [], valueArrayResFDos = 0, arrResRevisionFDos = [],
                arrResCreadorFDos = [], arrResModificadorFDos = [], arrResFechaFDos = [], arrResFechaModFDos = [];

                if (pathMongoOtProject[n].visible && pathMongoOtDetalles[o].visible) {
                    if (pathMongoOtProject[n].otStatus && pathMongoOtDetalles[o].statusDetalle) { %>
                        <!--Activo-->
                        <tr name="rowSelected<%=k%>_<%=n%>_<%=o%>" class="border-bottom" style="height: 5vh;">
                            <% for (let q = 10; totalColDataMecanizadoPrimera > q; q++) {
                                if (q==10) { %>
                                    <!--Fase 0 data Activo--> 
                                    <td class="text-center align-middle">
                                        <% if (largoArrayOtDetalles > 0 && largoArrayMecanizado > 0) {
                                                    
                                            for (let i = 0; largoArrayMecanizado > i; i++) {
                                                if (pathToMongoOtMecanizado[i]) {
                                                    let largoArray = parseInt(largoArrayMecanizado)
                                                    resDatoFCero = pathToMongoOtMecanizado[largoArray-1].fCero == 'sinDato' ? "S/D" : pathToMongoOtMecanizado[largoArray-1].fCero
                                                    resEstadoFCero = pathToMongoOtMecanizado[largoArray-1].estadoFCero == 'sinDato' ? "S/D" : pathToMongoOtMecanizado[largoArray-1].estadoFCero
                                                    resRevisionFCero = parseInt(pathToMongoOtMecanizado[largoArray-1].revisionFCero) || 0
                                                    
                                                    pathToMongoOtMecanizado[i].fCero == 'sinDato' ? arrResDatoFCero.push("S/D") : arrResDatoFCero.push(pathToMongoOtMecanizado[i].fCero)
                                                    pathToMongoOtMecanizado[i].estadoFCero == 'sinDato' ? arrResEstadoFCero.push("S/D") : arrResEstadoFCero.push(pathToMongoOtMecanizado[i].estadoFCero)
                                                    arrResRevisionFCero.push(pathToMongoOtMecanizado[i].revisionFCero)
                                                
                                                    arrResCreadorFCero.push(pathToMongoOtMecanizado[i].creator[0].username)
                                                    arrResModificadorFCero.push(pathToMongoOtMecanizado[i].modificator[0].username)
                                                    arrResFechaFCero.push(pathToMongoOtMecanizado[i].timestamp)
                                                    arrResFechaModFCero.push(pathToMongoOtMecanizado[i].modifiedOn)
                                                }
                                            }
                                            valueArrayResFCero = parseInt(arrResDatoFCero.length-1)

                                            if (arrResDatoFCero.length == 1 ) {
                                                anteriorDisabled = "disabled"
                                                siguienteDisabled = "disabled"
                                            } else if (arrResDatoFCero.length == arrResRevisionFCero.length) {
                                                anteriorDisabled = ""
                                                siguienteDisabled = "disabled"
                                            } else {
                                                anteriorDisabled = ""
                                                siguienteDisabled = "disabled"
                                            }
                                                    
                                        } else {
                                            arrResDatoFCero.push(resDatoFCero)
                                            arrResEstadoFCero.push(resEstadoFCero)
                                            arrResRevisionFCero.push(resRevisionFCero)
                                            
                                            arrResCreadorFCero.push(pathMongoOtDetalles[o].creator[0].username)
                                            arrResModificadorFCero = ""
                                            arrResFechaFCero.push(pathMongoOtDetalles[o].timestamp)
                                            arrResFechaModFCero = ""
                                        } %>
                                        
                                        <div id="btnAnteriorSiguienteFCero<%=k%>_<%=n%>_<%=o%>_<%=q%>">
                                            <button id="btnAnteriorFCero<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="btnAnteriorFCero" value="<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="btn btn-light btn-sm me-2" title="Ver anterior" type="button"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .35rem; --bs-btn-font-size: .75rem; color: var(--bs-black); cursor: pointer;"
                                                <%= anteriorDisabled %>
                                                ><i class="fa-solid fa-arrow-left"></i>
                                            </button>
                                            <input type="hidden" id="resDatoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResDatoFCero %>">
                                            <input type="hidden" id="resEstadoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResEstadoFCero %>">
                                            <input type="hidden" id="resIndexHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= valueArrayResFCero %>">
                                            <input type="hidden" id="resRevisionHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResRevisionFCero %>">
                                            <input type="hidden" id="arrResCreadorHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResCreadorFCero %>">
                                            <input type="hidden" id="arrResModificadorHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResModificadorFCero %>">
                                            <input type="hidden" id="arrResFechaHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResFechaFCero %>">
                                            <input type="hidden" id="arrResFechaModificacionHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResFechaModFCero %>">

                                            <span id="resDatoFCero<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="badge bg-light text-dark my-2">
                                                <%= resDatoFCero %>
                                            </span> |

                                            <% const config = mecanizadoPrimeraConfig[resEstadoFCero] || mecanizadoPrimeraConfig.default; %>
                                            <span id="resEstadoFCero<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%=resEstadoFCero%>">
                                                <i class="fa-solid <%= config.icon %> fa-lg" style="<%= config.iconColor %>"></i>
                                            </span> |

                                            <span id="resRevisionFCero<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="resRevisionFCero" class="badge text-dark my-2" style="cursor: help;" valueCreador="" valueFecha="" valueModificador="" valueFechaMod="">
                                                <%= resRevisionFCero %>
                                            </span>

                                            <button id="btnSiguienteFCero<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="btnSiguienteFCero" value="<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="btn btn-light btn-sm ms-2" title="Ver siguiente" type="button"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .35rem; --bs-btn-font-size: .75rem; color: var(--bs-black); cursor: pointer;" <%= siguienteDisabled %>
                                                ><i class="fa-solid fa-arrow-right"></i>
                                            </button>
                                        </div>
                                    </td>

                                <% } else if (q==11) { %>
                                    <!-- Fase 1 data Activo-->
                                    <td class="text-center align-middle">
                                        <% if (largoArrayOtDetalles > 0 && largoArrayMecanizado > 0) {

                                            for (let i = 0; largoArrayMecanizado > i; i++) {
                                                if (pathToMongoOtMecanizado[i]) {
                                                    let largoArray = parseInt(largoArrayMecanizado)
                                                    resDatoFUno = pathToMongoOtMecanizado[largoArray-1].fUno == 'sinDato' ? "S/D" : pathToMongoOtMecanizado[largoArray-1].fUno
                                                    resEstadoFUno = pathToMongoOtMecanizado[largoArray-1].estadoFUno == 'sinDato' ? "S/D" : pathToMongoOtMecanizado[largoArray-1].estadoFUno
                                                    resRevisionFUno = parseInt(pathToMongoOtMecanizado[largoArray-1].revisionFUno) || 0
                                                    
                                                    pathToMongoOtMecanizado[i].fUno == 'sinDato' ? arrResDatoFUno.push("S/D") : arrResDatoFUno.push(pathToMongoOtMecanizado[i].fUno)
                                                    pathToMongoOtMecanizado[i].estadoFUno == 'sinDato' ? arrResEstadoFUno.push("S/D") : arrResEstadoFUno.push(pathToMongoOtMecanizado[i].estadoFUno)
                                                    arrResRevisionFUno.push(pathToMongoOtMecanizado[i].revisionFUno)
                                                
                                                    arrResCreadorFUno.push(pathToMongoOtMecanizado[i].creator[0].username)
                                                    arrResModificadorFUno.push(pathToMongoOtMecanizado[i].modificator[0].username)
                                                    arrResFechaFUno.push(pathToMongoOtMecanizado[i].timestamp)
                                                    arrResFechaModFUno.push(pathToMongoOtMecanizado[i].modifiedOn)
                                                }
                                            }
                                            valueArrayResFUno = parseInt(arrResDatoFUno.length-1)
                                                    
                                            if (arrResDatoFUno.length == 1 ) {
                                                anteriorDisabled = "disabled"
                                                siguienteDisabled = "disabled"
                                            } else if (arrResDatoFUno.length == arrResRevisionFUno.length) {
                                                anteriorDisabled = ""
                                                siguienteDisabled = "disabled"
                                            } else {
                                                anteriorDisabled = ""
                                                siguienteDisabled = "disabled"
                                            }
                                                    
                                        } else {
                                            arrResDatoFUno.push(resDatoFUno)
                                            arrResEstadoFUno.push(resEstadoFUno)
                                            arrResRevisionFUno.push(resRevisionFUno)
                                            
                                            arrResCreadorFUno.push(pathMongoOtDetalles[o].creator[0].username)
                                            arrResModificadorFUno = ""
                                            arrResFechaFUno.push(pathMongoOtDetalles[o].timestamp)
                                            arrResFechaModFUno = ""
                                        } %>
                                        
                                        <div id="btnAnteriorSiguienteFUno<%=k%>_<%=n%>_<%=o%>_<%=q%>">
                                            <button id="btnAnteriorFUno<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="btnAnteriorFUno" value="<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="btn btn-light btn-sm me-2" title="Ver anterior" type="button"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .35rem; --bs-btn-font-size: .75rem; color: var(--bs-black); cursor: pointer;"
                                                <%= anteriorDisabled %>
                                                ><i class="fa-solid fa-arrow-left"></i>
                                            </button>
                                            <input type="hidden" id="resDatoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResDatoFUno %>">
                                            <input type="hidden" id="resEstadoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResEstadoFUno %>">
                                            <input type="hidden" id="resIndexHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= valueArrayResFUno %>">
                                            <input type="hidden" id="resRevisionHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResRevisionFUno %>">
                                            <input type="hidden" id="arrResCreadorHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResCreadorFUno %>">
                                            <input type="hidden" id="arrResModificadorHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResModificadorFUno %>">
                                            <input type="hidden" id="arrResFechaHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResFechaFUno %>">
                                            <input type="hidden" id="arrResFechaModificacionHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResFechaModFUno %>">

                                            <span id="resDatoFUno<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="badge bg-light text-dark my-2">
                                                <%= resDatoFUno %>
                                            </span> |

                                            <% const config = mecanizadoPrimeraConfig[resEstadoFUno] || mecanizadoPrimeraConfig.default; %>
                                            <span id="resEstadoFUno<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%=resEstadoFUno%>">
                                                <i class="fa-solid <%= config.icon %> fa-lg" style="<%= config.iconColor %>"></i>
                                            </span> |

                                            <span id="resRevisionFUno<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="resRevisionFUno" class="badge text-dark my-2" style="cursor: help;" valueCreador="" valueFecha="" valueModificador="" valueFechaMod="">
                                                <%= resRevisionFUno %>
                                            </span>

                                            <button id="btnSiguienteFUno<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="btnSiguienteFUno" value="<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="btn btn-light btn-sm ms-2" title="Ver siguiente" type="button"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .35rem; --bs-btn-font-size: .75rem; color: var(--bs-black); cursor: pointer;"
                                                <%= siguienteDisabled %>
                                                ><i class="fa-solid fa-arrow-right"></i>
                                            </button>
                                        </div>
                                    </td>

                                <% } else { %>
                                    <!-- Fase 2 data Activo-->
                                    <td class="text-center align-middle">
                                        <% if (largoArrayOtDetalles > 0 && largoArrayMecanizado > 0) {

                                            for (let i = 0; largoArrayMecanizado > i; i++) {
                                                if (pathToMongoOtMecanizado[i]) {
                                                    let largoArray = parseInt(largoArrayMecanizado)
                                                    resDatoFDos = pathToMongoOtMecanizado[largoArray-1].fDos == 'sinDato' ? "S/D" : pathToMongoOtMecanizado[largoArray-1].fDos
                                                    resEstadoFDos = pathToMongoOtMecanizado[largoArray-1].estadoFDos == 'sinDato' ? "S/D" : pathToMongoOtMecanizado[largoArray-1].estadoFDos
                                                    resRevisionFDos = parseInt(pathToMongoOtMecanizado[largoArray-1].revisionFDos) || 0
                                                    
                                                    pathToMongoOtMecanizado[i].fDos == 'sinDato' ? arrResDatoFDos.push("S/D") : arrResDatoFDos.push(pathToMongoOtMecanizado[i].fDos)
                                                    pathToMongoOtMecanizado[i].estadoFDos == 'sinDato' ? arrResEstadoFDos.push("S/D") : arrResEstadoFDos.push(pathToMongoOtMecanizado[i].estadoFDos)
                                                    arrResRevisionFDos.push(pathToMongoOtMecanizado[i].revisionFDos)
                                                
                                                    arrResCreadorFDos.push(pathToMongoOtMecanizado[i].creator[0].username)
                                                    arrResModificadorFDos.push(pathToMongoOtMecanizado[i].modificator[0].username)
                                                    arrResFechaFDos.push(pathToMongoOtMecanizado[i].timestamp)
                                                    arrResFechaModFDos.push(pathToMongoOtMecanizado[i].modifiedOn)
                                                }
                                            }
                                            valueArrayResFDos = parseInt(arrResDatoFDos.length-1)
                                                    
                                            if (arrResDatoFDos.length == 1 ) {
                                                siguienteDisabled = "disabled"
                                                anteriorDisabled = "disabled"
                                            } else if (arrResDatoFDos.length == arrResRevisionFDos.length) {
                                                anteriorDisabled = ""
                                                siguienteDisabled = "disabled"
                                            } else {
                                                anteriorDisabled = ""
                                                siguienteDisabled = "disabled"
                                            }
                                                
                                        } else {
                                            arrResDatoFDos.push(resDatoFDos)
                                            arrResEstadoFDos.push(resEstadoFDos)
                                            arrResRevisionFDos.push(resRevisionFDos)
                                            
                                            arrResCreadorFDos.push(pathMongoOtDetalles[o].creator[0].username)
                                            arrResModificadorFDos = ""
                                            arrResFechaFDos.push(pathMongoOtDetalles[o].timestamp)
                                            arrResFechaModFDos = ""
                                        } %>

                                        <div id="btnAnteriorSiguienteFDos<%=k%>_<%=n%>_<%=o%>_<%=q%>">
                                            <button id="btnAnteriorFDos<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="btnAnteriorFDos" value="<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="btn btn-light btn-sm me-2" title="Ver anterior" type="button"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .35rem; --bs-btn-font-size: .75rem; color: var(--bs-black); cursor: pointer;"
                                                <%= anteriorDisabled %>
                                                ><i class="fa-solid fa-arrow-left"></i>
                                            </button>
                                            <input type="hidden" id="resDatoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResDatoFDos %>">
                                            <input type="hidden" id="resEstadoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResEstadoFDos %>">
                                            <input type="hidden" id="resIndexHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= valueArrayResFDos %>">
                                            <input type="hidden" id="resRevisionHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResRevisionFDos %>">
                                            <input type="hidden" id="arrResCreadorHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResCreadorFDos %>">
                                            <input type="hidden" id="arrResModificadorHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResModificadorFDos %>">
                                            <input type="hidden" id="arrResFechaHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResFechaFDos %>">
                                            <input type="hidden" id="arrResFechaModificacionHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResFechaModFDos %>">

                                            <span id="resDatoFDos<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="badge bg-light text-dark my-2">
                                                <%= resDatoFDos %>
                                            </span> |

                                            <% const config = mecanizadoPrimeraConfig[resEstadoFDos] || mecanizadoPrimeraConfig.default; %>
                                            <span id="resEstadoFDos<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%=resEstadoFDos%>">
                                                <i class="fa-solid <%= config.icon %> fa-lg" style="<%= config.iconColor %>"></i>
                                            </span> |

                                            <span id="resRevisionFDos<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="resRevisionFDos" class="badge text-dark my-2" style="cursor: help;" valueCreador="" valueFecha="" valueModificador="" valueFechaMod="">
                                                <%= resRevisionFDos %>
                                            </span>

                                            <button id="btnSiguienteFDos<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="btnSiguienteFDos" value="<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="btn btn-light btn-sm ms-2" title="Ver siguiente" type="button"
                                                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .35rem; --bs-btn-font-size: .75rem; color: var(--bs-black); cursor: pointer;"
                                                <%= siguienteDisabled %>
                                                ><i class="fa-solid fa-arrow-right"></i>
                                            </button>
                                        </div>
                                    </td>
                                <% }
                            } %>
                        </tr>

                    <% } else { %>
                        <!-- Inactivo -->
                        <tr name="rowSelected<%=k%>_<%=n%>_<%=o%>" class="pe-none border-bottom" style="height: 5vh; background-color: #dedede;">
                            <% for (let q = 10; totalColDataMecanizadoPrimera > q; q++) {
                                if (q==10) { %>
                                    <!-- Fase 0 data Inactivo -->
                                    <td class="text-center align-middle">
                                        <% if (largoArrayOtDetalles > 0 && largoArrayMecanizado > 0) {
                                        
                                            for (let i = 0; largoArrayMecanizado > i; i++) {
                                                if (pathToMongoOtMecanizado[i]) {
                                                    let largoArray = parseInt(largoArrayMecanizado)
                                                    resDatoFCero = pathToMongoOtMecanizado[largoArray-1].fCero || 'sinDato'
                                                    resEstadoFCero = pathToMongoOtMecanizado[largoArray-1].estadoFCero || 'sinDato'
                                                    resRevisionFCero = parseInt(pathToMongoOtMecanizado[largoArray-1].revisionFCero) || 0
                                                                                                            
                                                    arrResDatoFCero.push(pathToMongoOtMecanizado[i].fCero)
                                                    arrResEstadoFCero.push(pathToMongoOtMecanizado[i].estadoFCero)
                                                    arrResRevisionFCero.push(pathToMongoOtMecanizado[i].revisionFCero)
                                                }
                                            }
                                            valueArrayResFCero = parseInt(arrResDatoFCero.length-1)
                                            resDatoFCero = pathToMongoOtMecanizado[0].FCero
                                            resEstadoFCero = pathToMongoOtMecanizado[0].estadoFCero

                                        } else {
                                            arrResDatoFCero.push(resDatoFCero)
                                            arrResEstadoFCero.push(resEstadoFCero)
                                            arrResRevisionFCero.push(resRevisionFCero)
                                        } %>
                                        <input type="hidden" id="resDatoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResDatoFCero %>">
                                        <input type="hidden" id="resEstadoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResEstadoFCero %>">
                                        <input type="hidden" id="resIndexHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= valueArrayResFCero %>">
                                        <input type="hidden" id="resRevisionHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResRevisionFCero %>">
                                    
                                        <span id="resDatoFCero<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="badge bg-secondary text-light my-2">
                                            <%= resDatoFCero %>
                                        </span> |

                                        <% const config = mecanizadoPrimeraConfig[resEstadoFCero] || mecanizadoPrimeraConfig.default; %>
                                        <span id="resEstadoFCero<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%=resEstadoFCero%>">
                                            <i class="fa-solid <%= config.icon %> fa-lg" style="<%= config.iconColor %>"></i>
                                        </span> |

                                        <span id="resRevisionFCero<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="resRevisionFCero" class="badge text-dark my-2" style="cursor: help;" valueCreador="" valueFecha="" valueModificador="" valueFechaMod="">
                                            <%= resRevisionFCero %>
                                        </span>
                                    </td>
                                <% } else if (q==11) { %>
                                    <!-- Fase 1 data Inactivo -->
                                    <td class="text-center align-middle">
                                        <% if (largoArrayOtDetalles > 0 && largoArrayMecanizado > 0) {
                                            for (let i = 0; largoArrayMecanizado > i; i++) {
                                                
                                                if (pathToMongoOtMecanizado[i]) {
                                                    let largoArray = parseInt(largoArrayMecanizado)
                                                    resDatoFUno = pathToMongoOtMecanizado[largoArray-1].fUno || 'sinDato'
                                                    resEstadoFUno = pathToMongoOtMecanizado[largoArray-1].fUno || 'sinDato'
                                                    resRevisionFUno = parseInt(pathToMongoOtMecanizado[largoArray-1].revisionFUno) || 0
                                                    
                                                    arrResDatoFUno.push(pathToMongoOtMecanizado[i].fUno)
                                                    arrResEstadoFUno.push(pathToMongoOtMecanizado[i].fUno)
                                                    arrResRevisionFUno.push(pathToMongoOtMecanizado[i].revisionFUno)
                                                }
                                            }
                                            valueArrayResFUno = parseInt(arrResDatoFUno.length-1)
                                            resDatoFUno = pathToMongoOtMecanizado[0].fUno
                                            resEstadoFUno = pathToMongoOtMecanizado[0].estadoFUno
                                    
                                        } else {
                                            arrResDatoFUno.push(resDatoFUno)
                                            arrResEstadoFUno.push(resEstadoFUno)
                                            arrResRevisionFUno.push(resRevisionFUno)
                                        } %>
                                        <input type="hidden" id="resDatoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResDatoFUno %>">
                                        <input type="hidden" id="resEstadoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResEstadoFUno %>">
                                        <input type="hidden" id="resIndexHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= valueArrayResFUno %>">
                                        <input type="hidden" id="resRevisionHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResRevisionFUno %>">

                                        <span id="resDatoFUno<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="badge bg-secondary text-light my-2">
                                            <%= resDatoFUno %>
                                        </span> |
                                        
                                        <% const config = mecanizadoPrimeraConfig[resEstadoFUno] || mecanizadoPrimeraConfig.default; %>
                                        <span id="resEstadoFUno<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%=resEstadoFUno%>">
                                            <i class="fa-solid <%= config.icon %> fa-lg" style="<%= config.iconColor %>"></i>
                                        </span> |

                                        <span id="resRevisionFUno<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="resRevisionFUno" class="badge text-dark my-2" style="cursor: help;" valueCreador="" valueFecha="" valueModificador="" valueFechaMod="">
                                            <%= resRevisionFUno %>
                                        </span>
                                    </td>

                                <% } else { %>
                                    <!-- Fase 2 data Inactivo -->
                                    <td class="text-center align-middle">
                                        <% if (largoArrayOtDetalles > 0 && largoArrayMecanizado > 0) {
                                            for (let i = 0; largoArrayMecanizado > i; i++) {
                                                
                                                if (pathToMongoOtMecanizado[i]) {
                                                    let largoArray = parseInt(largoArrayMecanizado)
                                                    resDatoFDos = pathToMongoOtMecanizado[largoArray-1].fDos || 'sinDato'
                                                    resEstadoFDos = pathToMongoOtMecanizado[largoArray-1].estadoFDos || 'sinDato'
                                                    resRevisionFDos = parseInt(pathToMongoOtMecanizado[largoArray-1].revisionFDos) || 0
                                                    
                                                    arrResDatoFDos.push(pathToMongoOtMecanizado[i].fDos)
                                                    arrResEstadoFDos.push(pathToMongoOtMecanizado[i].estadoFDos)
                                                    arrResRevisionFDos.push(pathToMongoOtMecanizado[i].revisionFDos)
                                                }
                                            }
                                            valueArrayResFDos = parseInt(arrResDatoFDos.length-1)
                                            resDatoFDos = pathToMongoOtMecanizado[0].fDos
                                            resEstadoFDos = pathToMongoOtMecanizado[0].estadoFDos
                                        
                                        } else {
                                            arrResDatoFDos.push(resDatoFDos)
                                            arrResEstadoFDos.push(resEstadoFDos)
                                            arrResRevisionFDos.push(resRevisionFDos)
                                        } %>
                                        <input type="hidden" id="resDatoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResDatoFDos %>">
                                        <input type="hidden" id="resEstadoHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResEstadoFDos %>">
                                        <input type="hidden" id="resIndexHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= valueArrayResFDos %>">
                                        <input type="hidden" id="resRevisionHidden<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%= arrResRevisionFDos %>">

                                        <span id="resDatoFDos<%=k%>_<%=n%>_<%=o%>_<%=q%>" class="badge bg-secondary text-light my-2">
                                            <%= resDatoFDos %>
                                        </span> |
                                        
                                        <% const config = mecanizadoPrimeraConfig[resEstadoFDos] || mecanizadoPrimeraConfig.default; %>
                                        <span id="resEstadoFDos<%=k%>_<%=n%>_<%=o%>_<%=q%>" value="<%=resEstadoFDos%>">
                                            <i class="fa-solid <%= config.icon %> fa-lg" style="<%= config.iconColor %>"></i>
                                        </span> |

                                        <span id="resRevisionFDos<%=k%>_<%=n%>_<%=o%>_<%=q%>" name="resRevisionFDos" class="badge text-dark my-2" style="cursor: help;" valueCreador="" valueFecha="" valueModificador="" valueFechaMod="">
                                            <%= resRevisionFDos %>
                                        </span>
                                    </td>
                                <% }
                            } %>
                        </tr>
                    <% }
                }
            }
        }) %>
    </tbody>
</table>